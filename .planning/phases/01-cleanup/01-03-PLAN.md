---
phase: 01-cleanup
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - client/index.html
  - client/public/manifest.json
  - client/src/components/GlobalHeader.tsx
  - client/src/pages/Welcome.tsx
  - client/src/pages/SupportPage.tsx
autonomous: false

must_haves:
  truths:
    - "App displays 'Circle App Template' branding (not 'Duo-Connecte')"
    - "Build completes without warnings for removed code"
    - "Browser tab shows 'Circle App Template' title"
    - "No orphaned imports to deleted Duo/Demo files remain"
  artifacts:
    - path: "client/index.html"
      provides: "Updated page title and meta description"
      contains: "Circle App Template"
      not_contains: ["Duo Connecte", "Duo-Connecte", "duo-connecte"]
    - path: "client/public/manifest.json"
      provides: "Updated PWA manifest"
      contains: "Circle App Template"
      not_contains: ["Duo Connecte"]
    - path: "client/src/components/GlobalHeader.tsx"
      provides: "Updated header branding"
      not_contains: ["Jumelage", "duo-connecte", "Avancer Simplement"]
  key_links:
    - from: "npm run build"
      to: "dist/"
      via: "Vite + esbuild compilation"
      pattern: "build completed"
---

<objective>
Update branding to "Circle App Template" and verify clean build

Purpose: Replace all Duo-Connecte branding with generic template branding, making the template ready for developers to customize with their own branding.

Output: All visible branding updated to "Circle App Template", production build completes without errors or warnings about removed code.
</objective>

<execution_context>
@/root/.claude/get-shit-done/workflows/execute-plan.md
@/root/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-cleanup/01-RESEARCH.md
@.planning/phases/01-cleanup/01-02-SUMMARY.md
@client/index.html
@client/public/manifest.json
@client/src/components/GlobalHeader.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update HTML and manifest branding</name>
  <files>
    client/index.html
    client/public/manifest.json
  </files>
  <action>
**Update client/index.html:**

1. Change title (line 6):
   From: `<title>Duo Connecte - Avancer Simplement</title>`
   To: `<title>Circle App Template</title>`

2. Change meta description (line 7):
   From: `<meta name="description" content="Guide de communication authentique et régulation émotionnelle. Apprenez à mieux communiquer en couple ou seul." />`
   To: `<meta name="description" content="A reusable template for building Circle.so embedded apps. Includes auth, admin, and support infrastructure." />`

3. Change apple-mobile-web-app-title (line 15):
   From: `<meta name="apple-mobile-web-app-title" content="Duo Connecte" />`
   To: `<meta name="apple-mobile-web-app-title" content="Circle App" />`

4. Change lang attribute (line 2):
   From: `<html lang="fr">`
   To: `<html lang="en">`

**Update client/public/manifest.json:**

1. Change name (line 2):
   From: `"name": "Duo Connecte - Avancer Simplement"`
   To: `"name": "Circle App Template"`

2. Change short_name (line 3):
   From: `"short_name": "Duo Connecte"`
   To: `"short_name": "Circle App"`

3. Change description (line 4):
   From: `"description": "Guide de communication authentique et régulation émotionnelle"`
   To: `"description": "A reusable template for Circle.so embedded apps"`
  </action>
  <verify>
Verify no old branding remains:
`grep -E "(Duo Connecte|Duo-Connecte|duo-connecte|Avancer Simplement)" client/index.html client/public/manifest.json` returns empty.
  </verify>
  <done>
index.html and manifest.json show "Circle App Template" branding with English descriptions.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update GlobalHeader and page branding</name>
  <files>
    client/src/components/GlobalHeader.tsx
    client/src/pages/Welcome.tsx
    client/src/pages/SupportPage.tsx
  </files>
  <action>
**Update client/src/components/GlobalHeader.tsx:**

1. Update the title/subtitle logic (around lines 69-78):
   ```typescript
   let title = "Circle App Template";
   let subtitle = "Member Area";

   if (location.startsWith('/admin')) {
       title = "Admin Dashboard";
       subtitle = "Administration";
   } else if (location === '/welcome') {
       title = "Circle App Template";
       subtitle = "Welcome";
   }
   ```

   Remove the `/duo` path check - no longer relevant.

2. Update the "origin_invalid" error message text in App.tsx (if still present after Plan 01) or GlobalHeader to be generic:
   - Change "Avancer Simplement" references to "your Circle community"
   - Update the external link to a placeholder or remove it

**Update client/src/pages/Welcome.tsx:**
Search for any hardcoded "Duo Connecte" or "Avancer Simplement" text and replace:
- Title: "Circle App Template"
- Subtitle: "Welcome to your Circle.so embedded app"
- Any French text should be changed to English equivalents

**Update client/src/pages/SupportPage.tsx:**
Search for any hardcoded "Duo Connecte" or "Avancer Simplement" text and replace:
- Form labels can stay generic ("Name", "Email", "Subject", "Description")
- Update any French text to English
- Update FAQ content if it references Duo-specific features
  </action>
  <verify>
Run comprehensive branding check:
`grep -rE "(Duo Connecte|Duo-Connecte|duo-connecte|Avancer Simplement|Jumelage)" client/src/` returns empty or only false positives (like in this plan file).
  </verify>
  <done>
GlobalHeader shows "Circle App Template" branding, Welcome page updated, SupportPage updated. No Duo-Connecte branding visible in UI.
  </done>
</task>

<task type="auto">
  <name>Task 3: Final build verification and orphaned import scan</name>
  <files>None (verification only)</files>
  <action>
Run full build verification to ensure all cleanup is complete:

1. **Run TypeScript check:**
   ```bash
   npm run check
   ```
   Must pass with no errors.

2. **Run production build:**
   ```bash
   npm run build
   ```
   Must complete successfully with no errors. Warnings about unused code are acceptable but should be minimal.

3. **ORPHANED IMPORT SCAN (CLEAN-05 verification):**
   Run explicit checks for any remaining imports to deleted files. Each command should return EMPTY:

   ```bash
   # Check for imports of deleted Duo page files
   grep -rE "import.*from.*['\"].*Duo" --include="*.ts" --include="*.tsx" client/src/ shared/ server/

   # Check for imports of deleted Demo page files
   grep -rE "import.*from.*['\"].*Demo" --include="*.ts" --include="*.tsx" client/src/ shared/ server/

   # Check for imports of BlockShowcase
   grep -rE "import.*BlockShowcase" --include="*.ts" --include="*.tsx" client/src/ shared/ server/

   # Check for imports of duoFlow, getFlow, FlowConfig, FlowType from schema
   grep -rE "import.*\{[^}]*(duoFlow|getFlow|FlowConfig|FlowType)[^}]*\}.*from.*schema" --include="*.ts" --include="*.tsx" client/src/ shared/ server/

   # Check for any remaining references to deleted exports
   grep -rE "(duoFlow|getFlow|FlowConfig|FlowType|senderName|receiverName|duoPageComponents)" --include="*.ts" --include="*.tsx" client/src/ shared/ server/

   # Check for orphaned path references to deleted routes
   grep -rE "['\"]/(duo|_demo)/" --include="*.ts" --include="*.tsx" client/src/ shared/ server/
   ```

   If ANY of these commands return results, fix the orphaned imports/references before proceeding.

4. **Final branding check:**
   ```bash
   # Check for any remaining Duo references in source code
   grep -rE "(Duo|duo)" --include="*.ts" --include="*.tsx" client/src/ shared/ server/ | grep -v node_modules | grep -v ".planning"

   # Should return empty or only legitimate uses (like "pseudo" which contains "duo")
   ```

5. **List remaining pages to confirm clean state:**
   ```bash
   ls client/src/pages/
   ```
   Should show only: auth.tsx, admin-login.tsx, dashboard.tsx, Welcome.tsx, PaywallScreen.tsx, SupportPage.tsx, not-found.tsx
  </action>
  <verify>
- `npm run check` exits with code 0
- `npm run build` exits with code 0
- ALL orphaned import grep commands return empty (no matches)
- `ls client/src/pages/ | wc -l` shows 7 files (auth, admin-login, dashboard, Welcome, PaywallScreen, SupportPage, not-found)
  </verify>
  <done>
TypeScript check passes, production build succeeds, NO orphaned imports to deleted files remain, only 7 core template pages remain.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 1 cleanup - removed all Duo-Connecte code and updated branding to "Circle App Template"</what-built>
  <how-to-verify>
1. Start the development server: `npm run dev`
2. Open http://localhost:5000 in your browser
3. Verify the following:
   - Browser tab shows "Circle App Template"
   - Login/auth page loads without errors
   - Navigate to /welcome - should show template welcome page
   - Navigate to /admin-login - admin login should work
   - Navigate to /admin - dashboard should load (after admin login)
   - Navigate to /support - support page should load
   - No console errors about missing components
   - Header shows "Circle App Template" branding (not "Duo Connecte")
4. Try navigating to /duo/anything - should show 404 Not Found
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
- [ ] `npm run check` passes
- [ ] `npm run build` succeeds
- [ ] No "Duo Connecte" text visible in browser
- [ ] Browser tab shows "Circle App Template"
- [ ] Header shows "Circle App Template" branding
- [ ] Only 7 pages remain in client/src/pages/
- [ ] /duo/* routes return 404
- [ ] App runs without console errors
- [ ] **NO orphaned imports to Duo/Demo/BlockShowcase files**
- [ ] **NO orphaned references to duoFlow, getFlow, FlowConfig, FlowType**
- [ ] **NO orphaned references to senderName, receiverName**
</verification>

<success_criteria>
1. All branding updated from "Duo-Connecte" to "Circle App Template"
2. `npm run check` passes
3. `npm run build` succeeds
4. 7 core pages remain: auth, admin-login, dashboard, Welcome, PaywallScreen, SupportPage, not-found
5. Human verification confirms app runs correctly with new branding
6. **All orphaned import scans return empty (CLEAN-05 fully satisfied)**
</success_criteria>

<output>
After completion, create `.planning/phases/01-cleanup/01-03-SUMMARY.md`
</output>
