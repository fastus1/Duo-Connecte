---
phase: 01-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - client/src/pages/Duo*.tsx (40 files deleted)
  - client/src/pages/Demo*.tsx (4 files deleted)
  - client/src/pages/BlockShowcase.tsx (deleted)
  - client/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "No Duo*.tsx files exist in client/src/pages/"
    - "App.tsx compiles without errors after Duo imports removed"
    - "npm run check passes (no broken imports)"
  artifacts:
    - path: "client/src/App.tsx"
      provides: "Clean router without Duo routes"
      not_contains: ["DuoPresentation", "DuoRoles", "duoPageComponents", "duoFlow.pages.map"]
  key_links:
    - from: "client/src/App.tsx"
      to: "client/src/pages/*.tsx"
      via: "import statements"
      pattern: "import.*from.*@/pages"
---

<objective>
Delete all Duo workflow page files and clean up App.tsx router

Purpose: Remove the 40+ Duo-Connecte specific workflow pages that are not part of the reusable template, leaving only infrastructure pages (auth, admin, support, welcome).

Output: Codebase with no Duo*.tsx files, App.tsx with clean imports and simplified routes.
</objective>

<execution_context>
@/root/.claude/get-shit-done/workflows/execute-plan.md
@/root/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-cleanup/01-RESEARCH.md
@client/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete all Duo and Demo page files</name>
  <files>
    client/src/pages/Duo*.tsx (40 files)
    client/src/pages/DemoLoadingScreen.tsx
    client/src/pages/DemoPaywallScreen.tsx
    client/src/pages/DemoPinCreation.tsx
    client/src/pages/DemoPinLogin.tsx
    client/src/pages/BlockShowcase.tsx
  </files>
  <action>
Delete all files matching the patterns:
- client/src/pages/Duo*.tsx (all 40 Duo workflow pages)
- client/src/pages/Demo*.tsx (4 demo screen files)
- client/src/pages/BlockShowcase.tsx

Use rm command with glob pattern:
```bash
rm client/src/pages/Duo*.tsx
rm client/src/pages/Demo*.tsx
rm client/src/pages/BlockShowcase.tsx
```

Verify deletion with: `ls client/src/pages/ | grep -E "^(Duo|Demo|Block)" | wc -l` should return 0.
  </action>
  <verify>
`ls client/src/pages/ | grep -E "^(Duo|Demo|Block)" | wc -l` returns 0
  </verify>
  <done>No Duo*.tsx, Demo*.tsx, or BlockShowcase.tsx files exist in client/src/pages/</done>
</task>

<task type="auto">
  <name>Task 2: Clean up App.tsx imports and routes</name>
  <files>client/src/App.tsx</files>
  <action>
Modify client/src/App.tsx to remove all Duo-related code:

1. **Remove imports (lines 10-77 approximately):**
   - Remove: `import { duoFlow, getFlow } from '@shared/schema';`
   - Remove: All DemoLoadingScreen, DemoPaywallScreen, DemoPinCreation, DemoPinLogin imports
   - Remove: All Duo page imports (DuoRoles, DuoPresentation, DuoWarnings, etc.)
   - Remove: BlockShowcase import
   - Keep: AdminPreviewSidebar, SidebarProvider, SidebarTrigger, SidebarInset imports (will be simplified in Plan 02)

2. **Remove duoPageComponents array (lines 78-118):**
   Delete the entire `const duoPageComponents = [...]` array.

3. **Clean up SessionRouter function:**
   - Remove: `const flow = getFlow(session.appType);`
   - Remove: `allPreviewPages` that reference duoFlow.pages
   - Remove: The useEffect that syncs URL with currentStep for duo flow
   - Remove: All duoFlow.pages.map route generation in both preview mode and normal mode

4. **Simplify routes in Switch statements:**
   Keep only these routes in both preview mode and normal mode:
   ```tsx
   <Route path="/" component={AuthPage} />
   <Route path="/welcome" component={Welcome} />
   <Route path="/admin-login" component={AdminLogin} />
   <Route path="/admin" component={Dashboard} />
   <Route path="/support" component={SupportPage} />
   <Route component={NotFound} />
   ```
   Remove: `/user-home` redirect, `/_demo/*` routes, `/admin/blocks` route, all `/duo/*` routes.

5. **Remove preview mode complexity:**
   Since there are no Duo pages to preview, simplify the admin preview mode:
   - Remove the allPreviewPages array and navigation logic
   - Remove prev/next page navigation buttons
   - Keep the sidebar for admin navigation but it will be simplified in Plan 02

6. **Clean unused imports at top:**
   - Remove: `useState`, `useMemo` if no longer used
   - Remove: `ChevronLeft`, `ChevronRight` from lucide-react
   - Remove: `Button` import if only used for preview navigation (check first)

Result should be a clean App.tsx with ~150-200 lines instead of ~390.
  </action>
  <verify>
Run `npm run check` from project root - should pass with no TypeScript errors related to missing modules.
  </verify>
  <done>
App.tsx contains no Duo imports, no duoPageComponents array, no duoFlow references, and routes only include /, /welcome, /admin-login, /admin, /support, and NotFound fallback.
  </done>
</task>

</tasks>

<verification>
- [ ] `ls client/src/pages/ | grep -E "^(Duo|Demo|Block)" | wc -l` returns 0
- [ ] `npm run check` passes without TypeScript errors
- [ ] App.tsx has no imports containing "Duo" or "Demo"
- [ ] App.tsx has no references to "duoFlow" or "duoPageComponents"
</verification>

<success_criteria>
1. Zero Duo*.tsx, Demo*.tsx, or BlockShowcase.tsx files in client/src/pages/
2. npm run check passes (TypeScript compilation succeeds)
3. App.tsx router contains only: /, /welcome, /admin-login, /admin, /support routes
</success_criteria>

<output>
After completion, create `.planning/phases/01-cleanup/01-01-SUMMARY.md`
</output>
